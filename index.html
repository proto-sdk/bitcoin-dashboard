<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Bitcoin Dashboard</title>
</head>
<body style="background: black; color: white; font-family: Arial, sans-serif; padding: 20px;">
    <h1>Bitcoin Network Statistics</h1>
    <p>Real-time blockchain metrics</p>
    
    <div style="margin-top: 30px;">
        <div style="background: #1a1a1a; border: 2px solid #FF6B35; border-radius: 10px; padding: 20px; margin: 10px 0;">
            <h2>Bitcoin Price</h2>
            <p id="price" style="font-size: 24px;">Loading...</p>
        </div>
        
        <div style="background: #1a1a1a; border: 2px solid #FF6B35; border-radius: 10px; padding: 20px; margin: 10px 0;">
            <h2>Network Hash Rate</h2>
            <p id="hashrate" style="font-size: 24px;">Loading...</p>
        </div>
        
        <div style="background: #1a1a1a; border: 2px solid #FF6B35; border-radius: 10px; padding: 20px; margin: 10px 0;">
            <h2>Block Height</h2>
            <p id="blockHeight" style="font-size: 24px;">Loading...</p>
        </div>
    </div>
    
    <p id="lastUpdated" style="margin-top: 30px; opacity: 0.7;">Loading...</p>
    
    <script>
        console.log('Script starting...');
        
        async function fetchData() {
            console.log('Fetching data...');
            
            // Bitcoin price
            try {
                const priceResponse = await fetch('https://api.coingecko.com/api/v3/simple/price?ids=bitcoin&vs_currencies=usd');
                const priceData = await priceResponse.json();
                document.getElementById('price').textContent = '$' + priceData.bitcoin.usd.toLocaleString();
                console.log('Price updated:', priceData.bitcoin.usd);
            } catch (e) {
                console.error('Price error:', e);
                document.getElementById('price').textContent = 'Error loading price';
            }
            
            // Hashrate
            try {
                const hashResponse = await fetch('https://mempool.space/api/v1/mining/hashrate/3d');
                const hashData = await hashResponse.json();
                const hashrateInEH = hashData.currentHashrate / 1e18;
                document.getElementById('hashrate').textContent = hashrateInEH.toFixed(2) + ' EH/s';
                console.log('Hashrate updated:', hashrateInEH);
            } catch (e) {
                console.error('Hashrate error:', e);
                document.getElementById('hashrate').textContent = 'Error loading hashrate';
            }
            
            // Block height
            try {
                const blockResponse = await fetch('https://blockstream.info/api/blocks/tip/height');
                const blockHeight = await blockResponse.text();
                document.getElementById('blockHeight').textContent = parseInt(blockHeight).toLocaleString();
                console.log('Block height updated:', blockHeight);
            } catch (e) {
                console.error('Block height error:', e);
                document.getElementById('blockHeight').textContent = 'Error loading block height';
            }
            
            // Update timestamp
            const now = new Date();
            document.getElementById('lastUpdated').textContent = 'Last updated: ' + now.toLocaleString();
        }
        
        // Run immediately
        fetchData();
        
        // Run every 5 minutes
        setInterval(fetchData, 5 * 60 * 1000);
        
        console.log('Script loaded successfully');
    </script>
</body>
</html>
